pipeline {
    agent { label 'local-agent' }
    parameters  {
        string(name: 'PULLED_BUILD_NUMBER', defaultValue: '', description: 'Image tag to use (build number)')
    }

    stages {
       stage('Pull the image and Run Test Cases')
        {
            steps{
                script{
                def tag = params.PULLED_BUILD_NUMBER.trim()

                bat "set IMAGE_VERSION=${tag} && docker-compose up -d"
                }
            }
        }
    }
}
